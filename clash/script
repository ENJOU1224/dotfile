  const secureDnsGroup = {
    name: "Secure-DNS",
    type: "url-test",
    url: "http://www.google.com",
    interval: 300,
    tolerance: 150,
    "include-all": true,
    filter: "^(?!.*(Direct|直连|剩余|流量|到期|过期|Traffic|Time|官网)).*"
  };
const priorityRules = [
  // --- DNS 防泄漏 ---
  "IP-CIDR,8.8.8.8/32,Secure-DNS,no-resolve",
  "IP-CIDR,8.8.4.4/32,Secure-DNS,no-resolve",
  "IP-CIDR,1.1.1.1/32,Secure-DNS,no-resolve",
  "IP-CIDR,1.0.0.1/32,Secure-DNS,no-resolve",
  "DOMAIN,dns.google,Secure-DNS",
  "DOMAIN,cloudflare-dns.com,Secure-DNS",
  "DOMAIN-SUFFIX,mcdn.bilibili.com,REJECT",
  "DOMAIN-SUFFIX,mcdn.bilibili.cn,REJECT",
  "PROCESS-NAME,fusion360.exe,DIRECT",
  ];
function main(config) {
  // 确保 proxy-groups 存在
  if (!config['proxy-groups']) {
    config['proxy-groups'] = [];
  }
  // 放到最后面
  config['proxy-groups'].push(secureDnsGroup);

  // 你的优先规则在前 + 机场自带规则在后
  // 既然机场自带了 MATCH/FINAL，我们就不需要手动补了
  config.rules = [...priorityRules, ...(config.rules || [])];

  return config;
}
